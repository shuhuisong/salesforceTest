<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>ID_ID</fullName>
        <field>ToyokeizaiId__pc</field>
        <formula>ToyokeizaiId__c</formula>
        <name>会員ID(東洋経済用会員ID)セット</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>ID_IDNEW</fullName>
        <field>ToyokeizaiId__c</field>
        <formula>ToyokeizaiId__pc</formula>
        <name>会員ID(東洋経済用会員ID)セット</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>LeadCodeClear</fullName>
        <field>LeadCode__c</field>
        <name>読者コード_クリア</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>LeadCodeSet</fullName>
        <field>LeadCode__pc</field>
        <formula>LeadCode__c</formula>
        <name>読者コード_セット</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>MailExternalIdClear</fullName>
        <field>MailExternalId__c</field>
        <name>メール(外部ID)クリア</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>PersonalEmail</fullName>
        <field>PersonEmail</field>
        <formula>MailExternalId__c</formula>
        <name>メール(外部ID)をPersonalEmailへコピー</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>ToyokeizaiIdClear</fullName>
        <description>会員ID(東洋経済用会員ID)クリア処理</description>
        <field>ToyokeizaiId__c</field>
        <name>会員ID(東洋経済用会員ID)クリア</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <rules>
        <fullName>メール%28外部ID%29セット</fullName>
        <actions>
            <name>PersonalEmail</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>メール(外部ID)をPersonalEmailへセット</description>
        <formula>IF(  AND(   RecordType.Name=&quot;個人&quot;,   OR(  ISCHANGED( MailExternalId__c),  CONTAINS(MailExternalId__c, &quot;@&quot;)  )  ),  true,false)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>会員ID%28東洋経済用会員ID%29_pcへのセット</fullName>
        <actions>
            <name>ID_ID</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>ToyokeizaiId__cの値をToyokeizaiId__pcへセット</description>
        <formula>IF(     AND(         RecordType.Name = &quot;個人&quot;,         NOT(ISCHANGED(RecordTypeId))     ),     IF(         AND(             (ToyokeizaiId__pc &lt;&gt; ToyokeizaiId__c),            NOT(ISBLANK(ToyokeizaiId__c))         ),         true,         false     ),     false )</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>個人取引先クリア処理</fullName>
        <actions>
            <name>LeadCodeClear</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>MailExternalIdClear</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>ToyokeizaiIdClear</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>レコードタイプ個人から法人に変更で取引先クリア処理</description>
        <formula>IF(  AND(  (RecordType.Name=&quot;法人&quot;),  ISCHANGED( RecordTypeId )), true,false)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>法人取引先メール%28外部ID%EF%BC%89クリア</fullName>
        <actions>
            <name>MailExternalIdClear</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <booleanFilter>1</booleanFilter>
        <criteriaItems>
            <field>Account.RecordTypeId</field>
            <operation>equals</operation>
            <value>法人</value>
        </criteriaItems>
        <description>法人取引先からメール(外部ID)をクリアする</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>読者コード_セット</fullName>
        <actions>
            <name>LeadCodeSet</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>LeadCode__cの値をLeadCode__pcへセット</description>
        <formula>IF(  AND(  RecordType.Name=&quot;個人&quot;,  NOT(ISCHANGED( RecordTypeId ))  ),  IF((LeadCode__pc &lt;&gt;  LeadCode__c),true,false),false)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
